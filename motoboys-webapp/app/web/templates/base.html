<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{{ title or "Motoboys" }}</title>
  <link rel="stylesheet" href="/static/styles.css"/>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="brand">
        <div class="brand__title">motoboys-webapp</div>
        <div class="brand__sub">UI mínima (P0)</div>
      </div>

      <nav class="nav">
        <a class="nav__item {% if nav=='imports' %}is-active{% endif %}" href="/ui/imports/new">Import</a>
        <a class="nav__item {% if nav=='pendencias' %}is-active{% endif %}" href="/ui/pendencias">Pendências</a>
        <a class="nav__item {% if nav=='weeks' %}is-active{% endif %}" href="/ui/weeks/current">Semana</a>
        <a class="nav__item {% if nav=='couriers' %}is-active{% endif %}" href="/ui/couriers">Entregadores</a>
      </nav>

      <div class="sidebar__footer muted">
        <div class="mono">/ui/*</div>
      </div>
    </aside>

    <main class="main">
      {% if request.query_params.get('ok') %}
        <div class="flash flash--ok">OK</div>
      {% endif %}
      {% if request.query_params.get('err') %}
        <div class="flash flash--err">{{ request.query_params.get('err') }}</div>
      {% endif %}

      {% block content %}{% endblock %}
    </main>
  </div>

  <script>
    // Quando criar entregador rápido, atualizar dropdowns de entregador (pendências).
    document.body.addEventListener('couriers-updated', () => {
      document.querySelectorAll('select[data-courier-select]').forEach(sel => {
        // htmx atualiza apenas o bloco alvo (#courier-options); aqui só força re-render do select
        // (mantém simples; o target já contém as <option> atualizadas).
      });
    });
  </script>
</body>
</html>
